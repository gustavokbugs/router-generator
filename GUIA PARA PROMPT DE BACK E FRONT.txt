# ğŸ“˜ **GUIA DE APLICAÃ‡ÃƒO - SISTEMA DE NAVEGAÃ‡ÃƒO DIJKSTRA**

## ğŸ¯ **VISÃƒO GERAL DO SISTEMA**

### **CONCEITO PRINCIPAL:**
Sistema de navegaÃ§Ã£o que calcula a **rota mais curta** entre dois pontos usando o **algoritmo Dijkstra**, com backend em C (DLL) e frontend em Python.

### **MUDANÃ‡A CRÃTICA DO PROJETO ORIGINAL:**
**âŒ REMOVER O MENU INICIAL** - O projeto original tinha 2 opÃ§Ãµes:
1. Rota com mÃºltiplos destinos (REMOVER)
2. Rota origemâ†’destino (MANTER)

**âœ… NOVA VERSÃƒO:** A aplicaÃ§Ã£o abre **DIRETAMENTE** na tela do mapa com a funÃ§Ã£o Ãºnica de origemâ†’destino.

---

## ğŸ—ºï¸ **COMPONENTES DO SISTEMA**

### **1. BACKEND (C) - MOTOR DO DIJKSTRA**
```
ğŸ“‚ backend/
â”œâ”€â”€ ğŸ“„ grafo.c / grafo.h           # Estruturas do grafo
â”œâ”€â”€ ğŸ“„ grafo_db.c / grafo_db.h     # Interface de dados
â”œâ”€â”€ ğŸ“„ grafo_data.c                # DADOS PRINCIPAIS (BANCO 1)
â”œâ”€â”€ ğŸ“„ grafo_algoritmos.h          # ğŸ†• NOVO: CabeÃ§alho do Dijkstra
â”œâ”€â”€ ğŸ“„ grafo_algoritmos.c          # ğŸ†• NOVO: ImplementaÃ§Ã£o Dijkstra
â”œâ”€â”€ ğŸ“„ main.c                      # Interface Pythonâ†’C
â”œâ”€â”€ ğŸ“„ router.dll                  # DLL gerada
â””â”€â”€ ğŸ“„ COMPILE.BAT                 # Script de compilaÃ§Ã£o
```

### **2. FRONTEND (Python) - INTERFACE DO USUÃRIO**
```
ğŸ“‚ frontend/
â”œâ”€â”€ ğŸ“„ app.py                      # AplicaÃ§Ã£o principal
â”œâ”€â”€ ğŸ“„ navegacao.py                # ComunicaÃ§Ã£o com DLL C
â”œâ”€â”€ ğŸ“„ assets/                     # Imagens, Ã­cones
â”‚   â”œâ”€â”€ ğŸ–¼ï¸ mapa.png               # Imagem do mapa (fundo)
â”‚   â””â”€â”€ ğŸ“ pins/                   # Pins para categorias
â””â”€â”€ ğŸ“„ banco_dados_2.json          # ğŸ†• FUTURO: Banco visual (BANCO 2)
```

---

## ğŸ’¾ **SISTEMA DE BANCO DE DADOS DUPLO**

### **ğŸ“Š BANCO DE DADOS 1 (GRAFO - PRINCIPAL)**
**LocalizaÃ§Ã£o:** `grafo_data.c` (jÃ¡ existe)
**PropÃ³sito:** CÃ¡lculo do Dijkstra
**ContÃ©m:**
- **VÃ©rtices:** ID, nome, categoria, coordenadas **DA CALÃ‡ADA**
- **Arestas:** ConexÃµes entre vÃ©rtices com distÃ¢ncias

**Exemplo:**
```c
{22, "Pastelaria Pasteten Platz", "Restaurante", "R. 7 de Setembro", 1, 194, 146}
// Coordenadas (194, 146) = posiÃ§Ã£o NA CALÃ‡ADA
```

### **ğŸ“Š BANCO DE DADOS 2 (VISUAL - FUTURO)**
**LocalizaÃ§Ã£o:** `banco_dados_2.json` (a criar)
**PropÃ³sito:** VisualizaÃ§Ã£o bonita no mapa
**ConterÃ¡:**
- **ID** (mesmo do Banco 1)
- **Coordenadas EM CIMA DO ESTABELECIMENTO**
- Nome, categoria (redundante, mas para conveniÃªncia)

**Exemplo:**
```json
{
  "22": {
    "nome": "Pastelaria Pasteten Platz",
    "categoria": "Restaurante",
    "x_visual": 210,
    "y_visual": 140,
    "pin": "restaurante.png"
  }
}
```

### **ğŸ”— LINKAGEM DOS BANCOS:**
```
FRONTEND mostra lista â†’ Usa Banco 2 (visual)
UsuÃ¡rio seleciona ID: 22 â†’ Passa ID para Dijkstra
Dijkstra calcula â†’ Usa Banco 1 (coordenadas calÃ§ada)
Frontend desenha rota â†’ Usa Banco 1 (coordenadas calÃ§ada)
Frontend mostra pin â†’ Usa Banco 2 (coordenadas visual)
```

---

## ğŸ¨ **INTERFACE DO USUÃRIO (LAYOUT FINAL)**

### **TELA PRINCIPAL (sem menu):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—ºï¸ SISTEMA DE NAVEGAÃ‡ÃƒO - DIJKSTRA                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                               â”‚
â”‚  ğŸ“‹ LISTA   â”‚                ğŸ—ºï¸ MAPA                         â”‚
â”‚  DE PONTOS  â”‚                (imagem de fundo)              â”‚
â”‚             â”‚                                               â”‚
â”‚  [Pesquisar]â”‚                [ROTA DESENHADA]               â”‚
â”‚  ID | Nome  â”‚                [Marcadores]                   â”‚
â”‚  22 | Past..â”‚                                               â”‚
â”‚  23 | BOTE..â”‚                                               â”‚
â”‚  ...        â”‚                                               â”‚
â”‚             â”‚                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ SELEÃ‡ÃƒO â”‚                ğŸ“Š RESULTADOS                   â”‚
â”‚  Origem: ...â”‚                DistÃ¢ncia: 450m                â”‚
â”‚  Destino: ..â”‚                Pontos: 17                     â”‚
â”‚             â”‚                Log: [mensagens]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸš€ [Calcular Rota]  ğŸ—‘ï¸ [Limpar Rota]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **COMPORTAMENTO DA INTERFACE:**
1. **Abertura:** Direto para tela do mapa (sem menu)
2. **Lista:** Carrega pontos do Banco 1 (inicialmente, depois Banco 2)
3. **SeleÃ§Ã£o:** Duplo clique na lista â†’ escolher Origem/Destino
4. **Mapa:** Mostra imagem do mapa + pins (futuro: Banco 2)
5. **CÃ¡lculo:** BotÃ£o habilitado apenas com origem E destino
6. **Limpeza:** Remove rota, permite nova seleÃ§Ã£o

---

## ğŸ”„ **FLUXO DE TRABALHO COMPLETO**

### **FASE 0: PREPARAÃ‡ÃƒO (DEV)**
```
1. Compilar backend: COMPILE.BAT
2. Verificar router.dll gerada
3. Preparar imagem mapa.png em assets/
```

### **FASE 1: USUÃRIO INICIA APLICAÃ‡ÃƒO**
```
App abre â†’ Carrega DLL C â†’ Carrega lista do Banco 1 â†’ Exibe tela do mapa
```

### **FASE 2: SELEÃ‡ÃƒO DE PONTOS**
```
1. UsuÃ¡rio dÃ¡ duplo clique em "Pastelaria" na lista
2. Popup: "Selecionar como Origem ou Destino?"
3. Escolhe "Origem" â†’ ID 22 armazenado
4. Repete para "McDonald's" como Destino â†’ ID 114 armazenado
```

### **FASE 3: CÃLCULO DA ROTA**
```
1. UsuÃ¡rio clica "Calcular Rota"
2. Frontend chama: calcular_rota(22, 114)
3. Backend C executa Dijkstra (usa Banco 1)
4. Retorna: sequÃªncia de IDs + distÃ¢ncia
```

### **FASE 4: VISUALIZAÃ‡ÃƒO**
```
1. Frontend converte IDs â†’ coordenadas (Banco 1)
2. Desenha linhas conectando pontos no mapa
3. Mostra marcadores de origem/destino
4. Exibe distÃ¢ncia e informaÃ§Ãµes
```

### **FASE 5: MANUTENÃ‡ÃƒO**
```
1. "Limpar Rota" â†’ remove tudo, reseta estado
2. Nova seleÃ§Ã£o possÃ­vel
```

---

## âš ï¸ **PONTOS DE ATENÃ‡ÃƒO PARA A IA**

### **1. REMOÃ‡ÃƒO DO MENU:**
- **ANTES:** Tela inicial com 2 opÃ§Ãµes â†’ menu
- **DEPOIS:** Abertura direta no mapa â†’ sem menu
- **AÃ‡ÃƒO:** Remover toda lÃ³gica de menu, ir direto para tela do mapa

### **2. BANCO DE DADOS 2 (FUTURO):**
- **NÃƒO IMPLEMENTAR AGORA** - apenas planejar
- **OBJETIVO:** Ter coordenadas visuais diferentes das do grafo
- **INTEGRAÃ‡ÃƒO:** Mesmo ID, coordenadas diferentes
- **VISUAL:** Pins bonitos em cima dos estabelecimentos

### **3. SELEÃ‡ÃƒO POR LISTA (NÃƒO POR CLIQUE NO MAPA):**
- **MÃ‰TODO:** UsuÃ¡rio seleciona da lista de nomes
- **RAZÃƒO:** Mais preciso, evita erro de clique
- **IMPLEMENTAÃ‡ÃƒO:** Treeview com duplo clique

### **4. COORDENADAS PARA DESENHO:**
- **PARA DIJKSTRA:** Usar Banco 1 (calÃ§adas)
- **PARA DESENHO:** Usar Banco 1 (calÃ§adas) - mesma para consistÃªncia
- **PARA PINS:** Futuro: Banco 2 (em cima do estabelecimento)

### **5. VALIDAÃ‡Ã•ES IMPORTANTES:**
- NÃ£o permitir origem = destino
- NÃ£o permitir calcular sem ambos selecionados
- NÃ£o permitir nova rota sem limpar anterior
- Verificar se DLL carregou corretamente

### **6. ESTADO DA APLICAÃ‡ÃƒO:**
- **Habilitado:** Quando origem E destino selecionados
- **Calculando:** Desabilitar botÃ£o durante cÃ¡lculo
- **Com rota:** Habilitar botÃ£o "Limpar"
- **Sem rota:** Desabilitar botÃ£o "Limpar"

---

## ğŸ¯ **PRIORIDADES DE IMPLEMENTAÃ‡ÃƒO**

### **PRIORIDADE 1 (CRÃTICO):**
1. Remover menu inicial
2. Implementar Dijkstra no backend
3. Interface bÃ¡sica com lista
4. ComunicaÃ§Ã£o Pythonâ†”C funcional

### **PRIORIDADE 2 (IMPORTANTE):**
1. Desenho da rota no mapa
2. ValidaÃ§Ãµes e tratamento de erros
3. BotÃ£o de limpeza funcional
4. Feedback visual adequado

### **PRIORIDADE 3 (FUTURO):**
1. Banco de dados 2 (visual)
2. Pins diferentes por categoria
3. Zoom/pan no mapa
4. OtimizaÃ§Ãµes de performance

---

## ğŸ”§ **COMANDOS PARA TESTE**

### **BACKEND:**
```bash
# Compilar
cd backend
COMPILE.BAT

# Verificar DLL
dir router.dll
```

### **FRONTEND:**
```bash
# Executar
python app.py

# Testar comunicaÃ§Ã£o
python -c "from navegacao import RouterLib; r = RouterLib(); print(r.testar_conexao())"
```

---

## â“ **PERGUNTAS FREQUENTES PARA A IA**

### **Q: Como lidar com diferentes escalas de coordenadas?**
**A:** O mapa tem coordenadas especÃ­ficas. As coordenadas do Banco 1 sÃ£o para o mapa. Pode ser necessÃ¡rio escalonar se a imagem do mapa for diferente.

### **Q: E se o usuÃ¡rio tentar calcular sem selecionar pontos?**
**A:** BotÃ£o "Calcular" deve estar DESABILITADO. ValidaÃ§Ã£o no clique tambÃ©m.

### **Q: Como evitar vazamento de memÃ³ria?**
**A:** Sempre chamar `liberar_resultado()` apÃ³s usar `calcular_rota()`.

### **Q: E se a DLL nÃ£o carregar?**
**A:** Mostrar erro claro e desabilitar todas as funcionalidades.

### **Q: Como testar se o Dijkstra estÃ¡ funcionando?**
**A:** Testar rota conhecida: ID 22 â†’ ID 114 deve retornar sequÃªncia especÃ­fica.

---

## ğŸš€ **CHECKLIST FINAL PARA A IA**

- [ ] **Remover menu inicial** - ir direto para tela do mapa
- [ ] **Backend Dijkstra completo** - com todas as funÃ§Ãµes C
- [ ] **Interface com lista** - Treeview para seleÃ§Ã£o
- [ ] **Mapa funcional** - imagem de fundo + desenho de rotas
- [ ] **ValidaÃ§Ãµes** - origemâ‰ destino, seleÃ§Ã£o completa
- [ ] **BotÃµes controlados por estado** - habilitar/desabilitar
- [ ] **Sistema de limpeza** - resetar estado completamente
- [ ] **Feedback ao usuÃ¡rio** - log de operaÃ§Ãµes
- [ ] **Tratamento de erros** - DLL, cÃ¡lculo, seleÃ§Ã£o
- [ ] **DocumentaÃ§Ã£o no cÃ³digo** - explicar fluxo importante

**Este guia fornece contexto completo para a IA entender TODO o sistema antes de implementar.** ğŸ¯